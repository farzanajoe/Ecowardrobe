<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoWardrobe ‚Äì Results</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .results-title-container {
            text-align: center;
            padding: 2rem 1rem;
            color: white;
        }

        .results-title {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .results-subtitle {
            opacity: 0.9;
        }

        .results-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 1rem 2rem;
        }

        /* Sustainability Score - BIG CIRCLE */
        .sustainability-score-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            text-align: center;
        }

        .sustainability-score-section h2 {
            color: #333;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            margin: 0 auto 1.5rem;
            position: relative;
        }

        .score-ring {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                #4ade80 0deg,
                #4ade80 calc(var(--score) * 3.6deg),
                #e5e7eb calc(var(--score) * 3.6deg),
                #e5e7eb 360deg
            );
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .score-inner {
            width: 160px;
            height: 160px;
            background: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .score-number {
            font-size: 3rem;
            font-weight: bold;
            color: #4ade80;
        }

        .score-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.25rem;
        }

        .score-rating {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
        }

        .score-description {
            color: #666;
            line-height: 1.6;
        }

        /* Top Boxes */
        .top-boxes {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .result-box {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .result-box h3 {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.75rem;
        }

        .result-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        /* Section Blocks */
        .section-block {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .section-block h2 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .section-block p {
            color: #555;
            line-height: 1.6;
        }

        .impact-list {
            list-style: none;
            margin-bottom: 1rem;
        }

        .impact-list li {
            padding: 0.75rem 0;
            color: #555;
            border-bottom: 1px solid #eee;
        }

        .impact-list li:last-child {
            border-bottom: none;
        }

        .impact-conclusion {
            background: #f0fdf4;
            padding: 1rem;
            border-radius: 10px;
            color: #166534;
            margin-top: 1rem;
        }

        .btn-container {
            text-align: center;
            margin-top: 2rem;
        }

        @media (max-width: 600px) {
            .top-boxes {
                grid-template-columns: 1fr;
            }
            
            .score-circle {
                width: 180px;
                height: 180px;
            }
            
            .score-inner {
                width: 140px;
                height: 140px;
            }
            
            .score-number {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <div class="logo-icon">üåø</div>
            <h1>EcoWardrobe</h1>
        </div>
        <div class="header-actions">
            <button class="icon-btn">üë§</button>
            <button class="icon-btn menu-btn">‚ò∞</button>
        </div>
    </header>

    <!-- RESULTS TITLE -->
    <section class="results-title-container">
        <h2 class="results-title">üìä Your Results</h2>
        <p class="results-subtitle">Based on your item details</p>
    </section>

    <main class="results-container">
        <!-- SUSTAINABILITY SCORE -->
        <section class="sustainability-score-section">
            <h2>üå± Sustainability Score</h2>
            <div class="score-circle">
                <div class="score-ring" id="scoreRing">
                    <div class="score-inner">
                        <div class="score-number" id="scoreNumber">0</div>
                        <div class="score-label">out of 100</div>
                    </div>
                </div>
            </div>
            <div class="score-rating" id="scoreRating">Calculating...</div>
            <p class="score-description" id="scoreDescription">
                We're analyzing your item's environmental impact...
            </p>
        </section>

        <!-- TOP BOXES -->
        <section class="top-boxes">
            <div class="result-box">
                <h3>üßµ Usability Measure</h3>
                <p class="result-value" id="usabilityValue">‚Äî</p>
            </div>
            <div class="result-box">
                <h3>üí∂ Cost Per Wear</h3>
                <p class="result-value" id="cpwValue">¬£‚Äî</p>
            </div>
        </section>

        <!-- RECOMMENDATION -->
        <section class="section-block">
            <h2>‚ú® Our Recommendation</h2>
            <p id="recommendationText">
                Analyzing your item...
            </p>
        </section>

        <!-- IMPACT SUMMARY -->
        <section class="section-block">
            <h2>üåç Environmental Impact Summary</h2>
            <ul class="impact-list">
                <li id="carbonImpact">üå´Ô∏è <strong>Carbon Footprint:</strong> Calculating...</li>
                <li id="waterImpact">üíß <strong>Water Usage:</strong> Calculating...</li>
                <li id="wasteImpact">üóëÔ∏è <strong>Waste Production:</strong> Calculating...</li>
            </ul>
            <p class="impact-conclusion" id="impactConclusion">
                Analyzing overall impact...
            </p>
        </section>

        <!-- BUTTON -->
        <div class="btn-container">
            <a href="index.html" class="btn-primary">Back to Predictor</a>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item">
            <span class="nav-icon">üîÆ</span>
            <span class="nav-label">Predict</span>
        </a>
        <a href="recommend.html" class="nav-item">
            <span class="nav-icon">‚ÑπÔ∏è</span>
            <span class="nav-label">About</span>
        </a>
    </nav>

    <script>
        // Get URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const itemType = urlParams.get('item_type') || '';
        const material = urlParams.get('Material') || '';
        const condition = urlParams.get('Condition') || '';
        const brandType = urlParams.get('brand_type') || '';
        const price = parseFloat(urlParams.get('price')) || 0;
        const seasonality = urlParams.get('Seasonality') || '';

        // FIXED: Calculate Sustainability Score (0-100) with proper weighting
        function calculateSustainabilityScore() {
            let score = 0;

            // Material Score (0-35 points) - Most important
            const materialScores = {
                'organic_cotton': 35,
                'hemp': 33,
                'bamboo_fabric': 30,
                'tencel': 28,
                'recycled_polyester': 25,
                'vegan_leather': 18
            };
            score += materialScores[material] || 20;

            // Brand Type Score (0-30 points)
            const brandScores = {
                'sustainable': 30,
                'mid_range': 18,
                'fast_fashion': 8
            };
            score += brandScores[brandType] || 15;

            // Condition Score (0-20 points)
            const conditionScores = {
                'Old': 20,      // Reusing old clothes is best
                'Good': 15,     // Good condition
                'New': 10       // New has higher impact
            };
            score += conditionScores[condition] || 12;

            // Seasonality (0-10 points)
            if (seasonality === 'All_Season') {
                score += 10;
            } else {
                score += 5;
            }

            // Price consideration (0-5 points)
            // Mid-range prices often indicate better quality
            if (price >= 40 && price <= 120) {
                score += 5;
            } else if (price > 120) {
                score += 3;
            } else {
                score += 2;
            }

            // Cap at 100
            return Math.min(Math.round(score), 100);
        }

        // Get rating text based on score
        function getRating(score) {
            if (score >= 80) return 'Excellent Choice! üåü';
            if (score >= 65) return 'Very Good üëç';
            if (score >= 50) return 'Good Choice ‚úì';
            if (score >= 35) return 'Fair Choice';
            return 'Consider Alternatives';
        }

        // Get description based on score
        function getDescription(score) {
            if (score >= 80) {
                return 'This item has exceptional sustainability credentials. It combines eco-friendly materials, ethical production, and long-term value. A truly responsible choice!';
            }
            if (score >= 65) {
                return 'This is a solid sustainable choice with good environmental credentials. It balances quality, ethics, and practicality well.';
            }
            if (score >= 50) {
                return 'This item has moderate sustainability features. While not perfect, it represents a better choice than many conventional alternatives.';
            }
            if (score >= 35) {
                return 'This item has some sustainability concerns. Consider if there are better alternatives or if you will use it frequently enough to justify the purchase.';
            }
            return 'This item scores lower on sustainability metrics. We recommend exploring secondhand options or more sustainable alternatives.';
        }

        // Calculate usability and cost per wear
        const usabilityRatings = ['High', 'Medium', 'Low'];
        const usability = usabilityRatings[Math.floor(Math.random() * usabilityRatings.length)];
        
        const estimatedWears = usability === 'High' ? 50 : usability === 'Medium' ? 30 : 15;
        const costPerWear = (price / estimatedWears).toFixed(2);

        // Get recommendation text
        function getRecommendation(score, usability) {
            if (score >= 65 && usability === 'High') {
                return '‚úÖ <strong>We recommend buying this item!</strong> It scores high on sustainability and you\'re likely to wear it frequently. This is a smart, eco-conscious purchase.';
            }
            if (score >= 50 && usability !== 'Low') {
                return '‚úÖ <strong>This is a reasonable purchase.</strong> The item has decent sustainability credentials and should see regular use in your wardrobe.';
            }
            if (score < 50 || usability === 'Low') {
                return '‚ö†Ô∏è <strong>Consider carefully before buying.</strong> Either the sustainability score is lower, or you may not wear it often. Could you find a secondhand version or choose a more sustainable alternative?';
            }
            return 'Consider whether this item truly fits your needs and values.';
        }

        // Get impact details
        function getImpactDetails(material, brandType) {
            const impacts = {
                carbon: {
                    'organic_cotton': 'Low carbon footprint',
                    'hemp': 'Very low carbon footprint',
                    'bamboo_fabric': 'Low carbon footprint',
                    'tencel': 'Low carbon footprint',
                    'recycled_polyester': 'Moderate carbon footprint',
                    'vegan_leather': 'Moderate to high carbon footprint'
                },
                water: {
                    'organic_cotton': 'Moderate water usage',
                    'hemp': 'Very low water usage',
                    'bamboo_fabric': 'Low water usage',
                    'tencel': 'Low water usage',
                    'recycled_polyester': 'Low water usage',
                    'vegan_leather': 'Moderate water usage'
                },
                waste: {
                    'sustainable': 'Minimal waste production',
                    'mid_range': 'Moderate waste production',
                    'fast_fashion': 'Higher waste production'
                }
            };

            return {
                carbon: impacts.carbon[material] || 'Moderate carbon footprint',
                water: impacts.water[material] || 'Moderate water usage',
                waste: impacts.waste[brandType] || 'Moderate waste production'
            };
        }

        // Calculate and display results
        const score = calculateSustainabilityScore();
        const rating = getRating(score);
        const description = getDescription(score);
        const recommendation = getRecommendation(score, usability);
        const impacts = getImpactDetails(material, brandType);

        // Update the page
        document.getElementById('scoreNumber').textContent = score;
        document.getElementById('scoreRating').textContent = rating;
        document.getElementById('scoreDescription').textContent = description;
        document.getElementById('scoreRing').style.setProperty('--score', score);

        // Update color based on score
        const scoreRing = document.getElementById('scoreRing');
        const scoreNumber = document.getElementById('scoreNumber');
        if (score >= 65) {
            scoreRing.style.background = `conic-gradient(#4ade80 0deg, #4ade80 ${score * 3.6}deg, #e5e7eb ${score * 3.6}deg, #e5e7eb 360deg)`;
            scoreNumber.style.color = '#4ade80';
        } else if (score >= 50) {
            scoreRing.style.background = `conic-gradient(#fbbf24 0deg, #fbbf24 ${score * 3.6}deg, #e5e7eb ${score * 3.6}deg, #e5e7eb 360deg)`;
            scoreNumber.style.color = '#fbbf24';
        } else {
            scoreRing.style.background = `conic-gradient(#f87171 0deg, #f87171 ${score * 3.6}deg, #e5e7eb ${score * 3.6}deg, #e5e7eb 360deg)`;
            scoreNumber.style.color = '#f87171';
        }

        document.getElementById('usabilityValue').textContent = usability;
        document.getElementById('cpwValue').textContent = `¬£${costPerWear}`;
        document.getElementById('recommendationText').innerHTML = recommendation;

        document.getElementById('carbonImpact').innerHTML = `üå´Ô∏è <strong>Carbon Footprint:</strong> ${impacts.carbon}`;
        document.getElementById('waterImpact').innerHTML = `üíß <strong>Water Usage:</strong> ${impacts.water}`;
        document.getElementById('wasteImpact').innerHTML = `üóëÔ∏è <strong>Waste Production:</strong> ${impacts.waste}`;

        const conclusionText = score >= 65
            ? 'Overall, this item is a significantly more sustainable option than most conventional alternatives.'
            : score >= 50
            ? 'Overall, this item has moderate environmental impact with room for improvement.'
            : 'Consider exploring more sustainable alternatives or secondhand options.';
        
        document.getElementById('impactConclusion').textContent = conclusionText;
    </script>
</body>
</html>